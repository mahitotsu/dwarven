# タスク分解

## フェーズ1: プロジェクトセットアップ

- [ ] プロジェクト構造の作成
  - [ ] pyproject.toml の作成（依存関係定義）
  - [ ] README.md の作成（使用方法の記載）
  - [ ] .gitignore の作成
  
- [ ] 開発環境のセットアップ
  - [ ] uv によるパッケージインストール
  - [ ] 仮想環境の作成・確認

## フェーズ2: コア機能実装

- [ ] analyze.py の基本構造作成
  - [ ] 引数解析機能 (`parse_arguments()`)
    - input-file 引数（必須）
    - output-file 引数（デフォルト: report.html）
  
  - [ ] データ読み込み機能 (`load_data()`)
    - pandasでCSV読み込み
    - 日付カラムのパース（pd.to_datetime）
    - カラムの存在確認
    - エラーハンドリング（ファイル不存在、不正な形式）
  
  - [ ] 統計計算機能 (`calculate_statistics()`)
    - 基本統計量の計算（mean, median, min, max, std）
    - データ件数のカウント
    - 日付範囲の取得
    - 欠損値の処理
  
  - [ ] 可視化機能 (`generate_charts()`)
    - 時系列折れ線グラフの生成
    - ヒストグラムの生成
    - Base64エンコード
  
  - [ ] レポート生成機能 (`generate_report()`)
    - HTMLテンプレートの作成
    - 統計情報の埋め込み
    - グラフの埋め込み
    - タイムスタンプの追加
  
  - [ ] メイン処理 (`main()`)
    - フロー制御
    - コンソールサマリー表示
    - エラーハンドリング

## フェーズ3: テストデータ作成

- [ ] sample_data.csv の作成
  - 30日分の時系列データ
  - date, value カラム
  - 正常系データ

## フェーズ4: テスト実装

- [ ] tests/ ディレクトリの作成
- [ ] test_analyze.py の作成
  - [ ] テストデータの準備（fixtures）
  - [ ] load_data() のテスト
    - 正常系: CSVの正しい読み込み
    - 異常系: ファイル不存在
    - 異常系: カラム不足
  - [ ] calculate_statistics() のテスト
    - 統計量の正確性確認
    - 空データの処理
  - [ ] generate_charts() のテスト
    - グラフ生成の成功確認
  - [ ] 統合テスト
    - end-to-end でHTMLレポート生成

## フェーズ5: 品質チェック

- [ ] コードフォーマット (black)
- [ ] 型チェック (mypy)
- [ ] Linting (ruff または flake8)
- [ ] テスト実行 (pytest)
- [ ] カバレッジ確認

## フェーズ6: ドキュメント整備

- [ ] README.md の完成
  - インストール手順
  - 使用方法
  - 実行例
  - トラブルシューティング
  
- [ ] サンプル実行
  - sample_data.csv で実行
  - 生成されたレポートの確認

## フェーズ7: 最終確認

- [ ] 全テストのパス確認
- [ ] 品質チェックツールのパス確認
- [ ] ドキュメントの最終レビュー
- [ ] 納品物の確認
  - analyze.py
  - pyproject.toml
  - README.md
  - sample_data.csv
  - tests/
  - docs/

## 優先順位

**高**: フェーズ1, 2（コア機能）
**中**: フェーズ3, 4（テスト）
**低**: フェーズ6（ドキュメント詳細化）

## 見積もり目安

- フェーズ1: 実装の10%
- フェーズ2: 実装の60%
- フェーズ3: 実装の5%
- フェーズ4: 実装の20%
- フェーズ5-7: 実装の5%

## 依存関係

```
フェーズ1 → フェーズ2 → フェーズ3 → フェーズ4 → フェーズ5 → フェーズ6 → フェーズ7
```

各フェーズは前のフェーズ完了後に開始可能。
